# GLWF06.txt 檔案規格書

## 檔案概述
GLWF06.txt 是一個定義損益表計算工作檔(GLWF06)的資料結構檔案，屬於總帳模組(GL模組)系統的一部分。該檔案主要用於處理損益表報表產生過程中的各類收入與支出分類及計算，為企業財務報表系統中損益表的產生提供數據支援。

## 檔案結構
檔案採用DDS (Data Description Specifications) 格式定義，以REF(GLRF)語句參照GLRF函式庫中的定義。其主要記錄格式為GLWF06R，包含大量收入與支出相關欄位，以WF0601(處理日期)作為主鍵。檔案設定了UNIQUE屬性，確保每個處理日期只有一筆記錄。

### 關鍵特性
- 檔案名稱：GLWF06
- 記錄格式：GLWF06R
- 主鍵：WF0601(處理日期)
- 參照檔案：GLRF (總帳模組的參照檔案)
- 記錄特性：UNIQUE (唯一性約束)

## 欄位結構說明

GLWF06.txt 定義了一個記錄格式(GLWF06R)，欄位分為兩大區塊：「實際」和「預算」，每個區塊內按損益表的主要類別設計，包含各類收入與支出的本期與累計值。

### 主要欄位

| 欄位編號 | 欄位名稱 | 資料類型 | 標題說明 | 用途說明 |
|----------|----------|----------|----------|----------|
| WF0601 | 處理日期 | 6位字元 | 處理日期 | 標識損益表資料的處理日期，作為主鍵 |

### 實際區塊欄位

| 欄位編號 | 欄位名稱 | 參照欄位 | 標題說明 | 用途說明 |
|----------|----------|----------|----------|----------|
| WF0602 | 營業收入本期 | AH12 | 0010營業收入本期 | 本期營業收入金額 |
| WF0603 | 營業收入累計 | AH12 | 0010營業收入累計 | 累計營業收入金額 |
| WF0604 | 營業成本本期 | AH12 | 0020營業成本本期 | 本期營業成本金額 |
| WF0605 | 營業成本累計 | AH12 | 0020營業成本累計 | 累計營業成本金額 |
| WF0606 | 營業費用本期 | AH12 | 0030營業費用本期 | 本期營業費用金額 |
| WF0607 | 營業費用累計 | AH12 | 0030營業費用累計 | 累計營業費用金額 |
| WF0608 | 營業外收入本期 | AH12 | 0040營業外收入本期 | 本期營業外收入金額 |
| WF0609 | 營業外收入累計 | AH12 | 0040營業外收入累計 | 累計營業外收入金額 |
| WF0610 | 營業外支出本期 | AH12 | 0050營業外支出本期 | 本期營業外支出金額 |
| WF0611 | 營業外支出累計 | AH12 | 0050營業外支出累計 | 累計營業外支出金額 |
| WF0612 | 非常性收入本期 | AH12 | 0060非常性收入本期 | 本期非常性收入金額 |
| WF0613 | 非常性收入累計 | AH12 | 0060非常性收入累計 | 累計非常性收入金額 |
| WF0614 | 非常性支出本期 | AH12 | 0070非常性支出本期 | 本期非常性支出金額 |
| WF0615 | 非常性支出累計 | AH12 | 0070非常性支出累計 | 累計非常性支出金額 |
| WF0616 | 累計純利本期 | AH12 | 0080累計純利本期 | 本期累計純利金額 |
| WF0617 | 累計純利累計 | AH12 | 0080累計純利累計 | 累計純利累計金額 |

### 預算區塊欄位

| 欄位編號 | 欄位名稱 | 參照欄位 | 標題說明 | 用途說明 |
|----------|----------|----------|----------|----------|
| WF0622 | 營業收入本期(預) | AH12 | 0010營業收入本期 | 本期預算營業收入金額 |
| WF0623 | 營業收入累計(預) | AH12 | 0010營業收入累計 | 累計預算營業收入金額 |
| WF0624 | 營業成本本期(預) | AH12 | 0020營業成本本期 | 本期預算營業成本金額 |
| WF0625 | 營業成本累計(預) | AH12 | 0020營業成本累計 | 累計預算營業成本金額 |
| WF0626 | 營業費用本期(預) | AH12 | 0030營業費用本期 | 本期預算營業費用金額 |
| WF0627 | 營業費用累計(預) | AH12 | 0030營業費用累計 | 累計預算營業費用金額 |
| WF0628 | 營業外收入本期(預) | AH12 | 0040營業外收入本期 | 本期預算營業外收入金額 |
| WF0629 | 營業外收入累計(預) | AH12 | 0040營業外收入累計 | 累計預算營業外收入金額 |
| WF0630 | 營業外支出本期(預) | AH12 | 0050營業外支出本期 | 本期預算營業外支出金額 |
| WF0631 | 營業外支出累計(預) | AH12 | 0050營業外支出累計 | 累計預算營業外支出金額 |
| WF0632 | 非常性收入本期(預) | AH12 | 0060非常性收入本期 | 本期預算非常性收入金額 |
| WF0633 | 非常性收入累計(預) | AH12 | 0060非常性收入累計 | 累計預算非常性收入金額 |
| WF0634 | 非常性支出本期(預) | AH12 | 0070非常性支出本期 | 本期預算非常性支出金額 |
| WF0635 | 非常性支出累計(預) | AH12 | 0070非常性支出累計 | 累計預算非常性支出金額 |
| WF0636 | 累計純利本期(預) | AH12 | 0080累計純利本期 | 本期預算累計純利金額 |
| WF0637 | 累計純利累計(預) | AH12 | 0080累計純利累計 | 累計預算純利累計金額 |

### 欄位參照關係
所有金額欄位均參照了會計傳票檔(GLAHPF)的借方金額欄位(AH12)，確保了金額格式的一致性。

### 主鍵結構
檔案使用WF0601(處理日期)作為主鍵：
```
A          K WF0601
```

此設計表明每個處理日期在檔案中只有一筆記錄，用於存儲該日期的損益表各項目金額。

## 欄位組織特點

### 1. 雙區塊對應設計
檔案中的欄位可明確分為兩大區塊：
- **實際區塊**：WF0602-WF0617，記錄實際發生的各類收支金額
- **預算區塊**：WF0622-WF0637，記錄預算中的各類收支金額

這種設計便於實際與預算數據的對比分析。

### 2. 類別與時間維度設計
在每個區塊內，欄位按照兩個維度組織：
- **類別維度**：按損益表的類別分組（營業收入、營業成本、營業費用等）
- **時間維度**：每個類別再分為「本期」和「累計」兩種時間維度

### 3. 類別編號系統
欄位標題中包含損益表科目的分類編號：
- 0010：營業收入
- 0020：營業成本
- 0030：營業費用
- 0040：營業外收入
- 0050：營業外支出
- 0060：非常性收入
- 0070：非常性支出
- 0080：累計純利

這種編號系統便於識別欄位所屬的損益表類別。

## 檔案用途

GLWF06檔案在會計系統中的主要用途包括：

1. **損益表產生**：為損益表報表提供基礎數據
2. **預算與實際比較**：通過對應欄位設計，便於預算與實際數據的比較
3. **財務分析支援**：支援本期與累計數據的分析比較
4. **報表格式標準化**：通過固定的欄位結構，標準化損益表的產生過程
5. **損益資料中央存儲**：集中存儲各期間損益表數據，便於查詢和分析

## 與其他檔案的關聯

GLWF06與總帳模組中的其他檔案有以下關聯：

1. **直接參照關係**：
   - 參照GLRF檔案庫的定義
   - 所有金額欄位參照會計傳票檔(GLAHPF)的金額欄位(AH12)

2. **功能關聯**：
   - 與科目基準表(GLADPF)關聯，使用相同的科目分類系統
   - 與會計傳票檔(GLAHPF)關聯，通過彙總會計傳票獲取各類收支金額
   - 與預算檔(GLATPF/GLAUPF)關聯，獲取預算數據
   - 可能與GLWF03/GLWF04協作，從中獲取經過分類處理的科目餘額

3. **資料流向**：
   - 會計傳票資料 → 科目餘額計算(GLWF03/GLWF04) → 損益分類彙總(GLWF06) → 損益表產生

## GLWF06的獨特性

相較於其他工作檔(GLWF01-GLWF05)，GLWF06具有以下獨特特點：

1. **損益表導向**：
   - 完全依照損益表結構設計欄位
   - 欄位名稱與標題直接對應損益表項目

2. **預算與實際並列**：
   - 同時包含預算和實際數據，便於對比分析
   - 使用相同的分類架構處理預算和實際數據

3. **多時間維度**：
   - 同時處理「本期」和「累計」兩種時間維度
   - 便於理解各收支項目的短期表現和長期趨勢

4. **損益表編碼系統**：
   - 使用標準化的損益表科目編號(0010-0080)
   - 便於識別和排序損益表項目

## 系統中的角色

在總帳模組系統中，GLWF06作為損益表工作檔，扮演以下角色：

1. **損益資料集成中心**：集成各類收支數據，為損益表提供數據來源
2. **預算執行分析平台**：提供預算與實際數據的對比分析功能
3. **時間維度分析支援**：支援本期與累計數據的分析
4. **損益表標準化工具**：通過標準欄位結構，確保損益表格式的一致性

## 操作考量

使用GLWF06檔案時的主要操作考量：

1. **處理日期管理**：
   - 每個處理日期只能有一筆記錄
   - 需明確定義處理日期的含義(如會計期末日)

2. **資料彙總邏輯**：
   - 定義清晰的科目到損益表項目的映射關係
   - 確保營業收入、成本、費用等分類的準確性

3. **預算資料整合**：
   - 確保預算資料來源與整合方式的一致性
   - 預算數據的時間維度應與實際數據保持一致

4. **時間維度計算**：
   - 明確定義「本期」與「累計」的計算邏輯
   - 確保累計數據在跨期間時的準確性

5. **淨利計算邏輯**：
   - 明確定義累計純利(WF0616/WF0617)的計算方法
   - 確保計算結果與其他收支項目保持一致

## 報表產生流程中的位置

在報表產生流程中，GLWF06位於以下位置：

1. **數據準備階段**：
   - 從科目餘額檔案(如GLWF03/GLWF04)獲取科目餘額
   - 按損益表格式重新分類和彙總數據

2. **報表計算階段**：
   - 計算各損益表項目的本期與累計值
   - 計算預算與實際數據的差異

3. **報表輸出階段**：
   - 將損益表各項目數據組織成報表格式
   - 產生實際值、預算值與差異分析的綜合報表

## 特殊使用場景

GLWF06在以下特殊場景中可能特別有用：

1. **季度與年度報表**：
   - 支援季度與年度損益表的產生和比較
   - 通過累計值欄位支援跨期間的分析

2. **預算績效評估**：
   - 通過實際與預算的對比，評估企業經營績效
   - 分析各類收支項目預算執行的差異原因

3. **趨勢分析**：
   - 通過多期GLWF06數據的比較，分析收支趨勢
   - 識別異常波動的收支項目

4. **管理決策支援**：
   - 提供簡明的損益資訊，支援管理層決策
   - 通過預算與實際比較，指導未來預算編製

## 結論

GLWF06.txt是總帳系統中專注於損益表處理的重要工作檔案定義。它通過分類明確的欄位設計，有效支援損益表的產生和分析，並通過預算與實際的並列設計，便於企業進行績效評估。GLWF06的設計完全依照損益表的標準結構，確保了損益報表的一致性和準確性。正確理解和使用這個檔案對於確保財務報表的準確性和一致性至關重要，特別是在損益表產生和分析方面。 