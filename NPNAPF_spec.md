# NPNAPF 檔案規格說明

## 檔案概述
NPNAPF是A&P代碼管理系統的核心主檔（Physical File），用於儲存A&P（Accounts & Products）代碼的基本資訊。此檔案作為系統的基礎資料存儲，定義了A&P代碼的結構和屬性，為相關報表和分析功能提供資料支援。

## 檔案結構
- **檔案名稱**: NPNAPF
- **檔案類型**: 實體檔案（Physical File）
- **記錄格式**: NA0
- **參考檔案**: NPRF（NP系統參考檔案）
- **唯一性設定**: UNIQUE（確保記錄的唯一性）

## 主要功能
- 儲存所有A&P代碼的基本資訊
- 定義A&P代碼的結構和屬性
- 作為A&P代碼管理相關功能的資料來源
- 支援財務報表和分析功能的資料需求

## 欄位結構

| 欄位名稱 | 參考 | 標題 | 用途說明 |
|---------|------|------|---------|
| NA01 | AC02 | 年度 | 識別特定的財務年度 |
| NA02 | - | A&P CODE | A&P代碼，用於識別特定的帳戶或產品類別 |
| NA03 | - | A&P名稱 | A&P代碼的描述性名稱 |
| NA04 | - | A&P類別 | 區分A&P代碼的類型（T=支出，D=收入） |
| NA97 | - | 建立時間 | 記錄建立的時間戳記 |
| NA98 | - | 建立者 | 記錄建立者的識別碼 |
| NA99 | - | 建立站 | 記錄建立的工作站識別碼 |

## 欄位詳細說明

### NA01（年度）
- 參考AC02欄位格式
- 記錄A&P代碼關聯的財務年度
- 作為複合主索引的一部分，與NA02共同確保記錄唯一性
- 支援按年度篩選和分組A&P代碼

### NA02（A&P CODE）
- 存儲A&P代碼值
- 作為複合主索引的一部分，與NA01共同確保記錄唯一性
- 用於唯一識別特定的帳戶或產品類別

### NA03（A&P名稱）
- 儲存A&P代碼的描述性名稱
- 提供可讀性較高的A&P代碼說明
- 用於報表顯示和用戶介面識別

### NA04（A&P類別）
- 標識A&P代碼的類型
- "T"表示支出（Expense）類型
- "D"表示收入（Income）類型
- 用於財務分析和報表分類

### NA97/NA98/NA99（建立資訊）
- 記錄資料建立的時間、建立者和工作站
- 用於資料追踪和稽核目的
- 支援資料管理和問題排查

## 索引結構
- **複合主索引**: NA01（年度）+ NA02（A&P CODE）
  - 確保每個年度中的每個A&P代碼都是唯一的
  - 優化按年度和A&P代碼的查詢效能
  - 支援按年度和代碼排序的報表和查詢

## 主要用途
1. **A&P代碼定義**：提供A&P代碼的標準定義和屬性
2. **財務報表支援**：支援按A&P代碼分類的財務報表
3. **預算管理**：作為預算編制和分析的分類依據
4. **成本分析**：支援按A&P代碼的成本分析和控制

## 與其他檔案的關係
- **NPNALF/NPNALF01（邏輯檔案）**：提供NPNAPF的不同邏輯視圖
- **NPNBPF（A&P會計科目檔）**：建立A&P代碼與會計科目的關聯
- **NPNDPF（年度A&P預算與實際檔）**：記錄每個A&P代碼的預算和實際金額
- **NPNFPF（產品別月別憑證檔）**：記錄與A&P代碼相關的憑證資訊

## NPNAPF在系統中的作用
NPNAPF作為A&P代碼管理系統的基礎，提供了標準化的A&P代碼定義，確保系統中所有相關功能使用一致的A&P分類標準。這種標準化支援了：

1. **資料一致性**：確保所有相關系統使用相同的A&P代碼定義
2. **跨年度比較**：支援不同年度間相同A&P代碼的比較分析
3. **類別分析**：按支出和收入類型分析A&P代碼
4. **報表整合**：為各類財務報表提供一致的A&P代碼分類基礎

## 資料維護考量
1. **代碼標準化**：
   - 維持A&P代碼的命名和使用標準
   - 確保新增的A&P代碼符合既定規範

2. **年度管理**：
   - 在新財務年度開始時建立新年度的A&P代碼記錄
   - 確保跨年度A&P代碼的一致性

3. **資料完整性**：
   - 定期檢查A&P代碼資料的完整性
   - 確保所有必要的A&P代碼都已定義

4. **參考完整性**：
   - 維護NPNAPF與相關檔案間的參考完整性
   - 處理A&P代碼變更或刪除時的關聯資料處理

## 系統角色
NPNAPF在NP（可能是New Product或特定業務單位）系統中扮演中央資料字典的角色，定義標準化的A&P代碼體系。它是A&P代碼相關資料的權威來源，為系統中的多個模組和功能提供基礎資料支援。 