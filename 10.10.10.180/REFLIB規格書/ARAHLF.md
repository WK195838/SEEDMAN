# 報關資料邏輯檔規格書

## 一、報關資料邏輯檔 (ARAHLF)
- **檔案說明**：報關資料邏輯檔
- **主鍵**：AH01+AH02+AH03+AH04 (客戶號+銀行代號+分行代號+報單編號)
- **特性**：邏輯檔
- **實體檔案**：ARAFPF, SOSGPF

## 二、邏輯檔結構

### 2.1 ARAFPF 實體檔關聯 (AF0)
- **說明**：關聯海關報關明細檔
- **排序**：AH02 (銀行代號), AH05 (報關日期, 降序), AH03 (分行代號), AH04 (報單編號)

| 欄位名稱 | 欄位說明 | 原始欄位 | 特殊設定 |
|---------|---------|---------|----------|
| AH01 | 客戶號 | AF01 | - |
| AH02 | 銀行代號 | AF03 | 排序1 |
| AH03 | 分行代號 | AF04 | 排序3 |
| AH04 | 報單編號 | AF02 | 排序4 |
| AH05 | 報關日期 | AF05 | 排序2 (降序) |
| AH06 | 報關金額 | AF07 | - |

### 2.2 SOSGPF 實體檔關聯 (SG0)
- **說明**：關聯銷貨報關檔
- **排序**：AH02 (銀行代號), AH05 (報關日期, 降序), AH03 (分行代號), AH04 (報單編號)

| 欄位名稱 | 欄位說明 | 原始欄位 | 特殊設定 |
|---------|---------|---------|----------|
| AH01 | 客戶號 | SG01 | - |
| AH02 | 銀行代號 | SG04 | 排序1 |
| AH03 | 分行代號 | SG05 | 排序3 |
| AH04 | 報單編號 | SG09 | 排序4 |
| AH05 | 報關日期 | SG26 | 排序2 (降序) |
| AH06 | 保稅金額 | SG10 | - |
| AH07 | 訂單編號 | SG02 | - |
| AH08 | 訂單項次 | SG06 | - |

## 三、檔案關聯說明

1. **主要關聯**
   - 實體檔案1：ARAFPF (海關報關明細檔)
   - 實體檔案2：SOSGPF (銷貨報關檔)
   - 共同欄位：客戶號、銀行代號、分行代號、報單編號、報關日期

2. **邏輯檔用途**
   - 提供統一的報關資料存取介面
   - 基於相同排序條件整合兩個實體檔的資料
   - 以銀行代號為首要排序鍵
   - 以報關日期降序為次要排序鍵

## 四、特殊說明

1. **邏輯檔特性**
   - 整合不同來源的報關資料
   - 針對海關報關和銷貨報關提供一致的資料結構
   - 共用相同的主要欄位結構和排序方式
   - 同時包含兩個實體檔的特有欄位

2. **排序說明**
   - 首要排序：銀行代號(AH02)
   - 次要排序：報關日期(AH05)，以降序排列
   - 第三排序：分行代號(AH03)
   - 第四排序：報單編號(AH04)

3. **使用目的**
   - 統一查詢海關報關和銷貨報關資料
   - 提供以銀行為主的報關資料彙總
   - 顯示最新報關資料優先的查詢結果
   - 便於追蹤同一報關單在不同系統的記錄

這份規格書詳細說明了報關資料邏輯檔的結構和用途，包括欄位對應、排序和資料關聯。該邏輯檔整合了兩個實體檔案的資料，提供統一的報關資料查詢介面。 