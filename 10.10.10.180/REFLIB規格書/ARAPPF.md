# 電子發票資料檔規格書

## 一、電子發票資料檔 (ARAPPF)
- **檔案說明**：電子發票資料檔
- **主鍵**：AP01 (發票號碼)
- **特性**：詳細記錄電子發票的完整資訊

| 欄位名稱 | 欄位說明 | 長度 | 屬性 | 檢核規則 |
|---------|---------|------|------|----------|
| AP01 | 發票號碼 | 10 | 輸出 | - |
| AP02 | 發票開立日期 | 8 | 輸出 | - |
| AP03 | 發票開立時間 | 8 | 輸出 | - |
| AP04 | 賣方-統一編號 | 10 | 輸出 | - |
| AP05 | 賣方-名稱 | 60 | 輸出 | - |
| AP06 | 賣方-地址 | 100 | 輸出 | - |
| AP07 | 賣方-負責人 | 30 | 輸出 | - |
| AP08 | 賣方-電話號碼 | 26 | 輸出 | - |
| AP09 | 賣方-傳真號碼 | 26 | 輸出 | - |
| AP10 | 賣方-電子郵件 | 80 | 輸出 | - |
| AP11 | 賣方-分店代號 | 20 | 輸出 | - |
| AP12 | 賣方-營業類別 | 40 | 輸出 | - |
| AP13 | 買方-統一編號 | 10 | 輸出 | - |
| AP14 | 買方-名稱 | 60 | 輸出 | - |
| AP15 | 買方-地址 | 100 | 輸出 | - |
| AP16 | 買方-負責人 | 30 | 輸出 | - |
| AP17 | 買方-電話號碼 | 26 | 輸出 | - |
| AP18 | 買方-傳真號碼 | 26 | 輸出 | - |
| AP19 | 買方-電子郵件 | 80 | 輸出 | - |
| AP20 | 買方-分店代號 | 20 | 輸出 | - |
| AP21 | 買方-營業類別 | 40 | 輸出 | - |
| AP22 | 發票檢查碼 | 10 | 輸出 | - |
| AP23 | 買受人註記 | 1 | 文字 | - |
| AP24 | 總備註 | 384 | 輸出 | - |
| AP25 | 電子方式註記 | 1 | 文字 | - |
| AP26 | 沖帳號 | 2 | 文字 | - |
| AP27 | 客戶編號 | 20 | 輸出 | - |
| AP28 | 發票聯號 | 2 | 文字 | - |
| AP29 | 捐贈註記 | 1 | 文字 | - |
| AP30 | 折讓註記 | 1 | 文字 | - |
| AP31 | 稅率異動註記 | 1 | 文字 | - |
| AP32 | 含稅金額總計 | 12 | 文字 | - |
| AP33 | 課稅別 | 1 | 文字 | - |
| AP34 | 稅率 | 6 | 文字 | - |
| AP35 | 營業稅額 | 12 | 文字 | - |
| AP36 | 總計 | 12 | 文字 | - |
| AP37 | 折扣金額 | 12 | 文字 | - |
| AP38 | 幣別金額 | 20 | 文字 | - |
| AP39 | 匯率 | 13 | 文字 | - |
| AP40 | 幣別 | 3 | 文字 | - |

## 二、檔案關聯說明

1. **主要關聯**
   - 與ARAOPF(發票開立狀態檔)密切相關
   - 發票號碼(AP01)關聯電子發票管理系統
   - 與買方和賣方基本資料檔案相關聯
   - 與稅務管理系統相關聯
   - 與財務管理系統相關聯

2. **邏輯檔關聯**
   - 可能有與發票明細相關的邏輯檔

## 三、特殊說明

1. **欄位分組說明**
   - 基本資訊：AP01-AP03 (發票號碼、開立日期、開立時間)
   - 賣方資訊：AP04-AP12 (賣方統編、名稱、地址等詳細資訊)
   - 買方資訊：AP13-AP21 (買方統編、名稱、地址等詳細資訊)
   - 發票金額資訊：AP32-AP40 (含稅金額、稅率、稅額、總計等財務資訊)
   - 其他控制資訊：AP22-AP31 (檢查碼、各類註記等)

2. **資料維護重點**
   - 紀錄電子發票的完整資訊
   - 維護買賣雙方詳細資料
   - 記錄稅務和金額相關資訊
   - 支援電子發票的各種特殊功能（如捐贈、折讓等）
   - 提供電子發票查詢的完整資料基礎

3. **使用目的**
   - 作為電子發票的主要資料儲存檔案
   - 提供電子發票開立的完整記錄
   - 支援財務部門發票稅額管理
   - 支援稅務申報和稽核
   - 提供買賣雙方交易資料的完整記錄
   - 作為發票資料交換的基礎

4. **與ARAOPF的關係**
   - ARAOPF主要記錄發票開立狀態和基本資訊
   - ARAPPF儲存發票的完整詳細資料
   - ARAOPF可視為ARAPPF的狀態追蹤補充檔案
   - 兩者透過發票號碼(AO01/AP01)關聯

這份規格書詳細說明了電子發票資料檔的結構和用途，包括欄位定義、分組、關聯和特殊說明。該檔案是電子發票系統的核心資料檔，儲存了發票的所有相關資訊，支援企業的稅務管理、財務管理和發票開立作業。 