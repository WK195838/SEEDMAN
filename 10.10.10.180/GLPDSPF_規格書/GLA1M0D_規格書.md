# GLA1M0D 螢幕顯示檔案規格書

## 基本資訊
- 檔案名稱：GLA1M0D
- 檔案類型：螢幕顯示檔案 (DSPF)
- 來源目錄：QDDSSRC_GLPLIB
- 程式說明：部門資料維護
- 系統：茂世會計系統
- 子系統：總帳系統
- 作者：TINA
- 建立日期：1994.07.21
- 更新日期：無

## 螢幕規格
- 顯示大小：24x80
- 參考檔案：GLRF (總帳欄位定義檔)
- 螢幕代號：GLA1M0.1
- 訊息位置：第22行
- 列印功能：支援

## 螢幕佈局
```
<GLA1M0.1>                [公司名稱]                       日期: [YYMMDD]
[使用者ID]                部門資料維護                     時間: [時間]









                         部門代號: [  ] - [  ]

                         部門名稱: [                              ]

                         部門類別: [ ]









[部門資料清單]
序號  部門代號  部門名稱                          部門類別
----  --------  ------------------------------  --------
[1]   [  ]      [                              ]  [ ]
[2]   [  ]      [                              ]  [ ]
[3]   [  ]      [                              ]  [ ]
[4]   [  ]      [                              ]  [ ]
[5]   [  ]      [                              ]  [ ]

[錯誤訊息顯示區域]
注意    PF3 =返回前頁    PF4 =查詢    PF5 =新增    PF6 =修改    PF7 =刪除
       PF8 =複製    PF12=返回前一頁    PF13=列印    PF14=清除    PF15=確認
       PF16=取消    PF17=上頁    PF18=下頁    PF19=第一頁    PF20=最後一頁
       PF21=查詢條件    PF22=查詢結果    PF23=查詢條件設定    PF24=查詢結果設定
                                                           【茂世資訊】
```

## 記錄格式
### DSPD1 - 主畫面
- 條件指示器：CA03(03), CF13(13)
- 標題：<GLA1M0.1>
- 公司名稱：CONAME (32A, 輸出)
- 日期：DDATE (6Y, 輸出, 日期格式)
- 使用者：$USERN (10A, 輸出)
- 部門代號：DAH01 (參考AH01)
- 部門名稱：#B02 (參考PTRF)
- 部門類別：DAH02 (參考AH02)

### DSPC1 - 錯誤訊息畫面
- 條件指示器：CA03(03), CF13(13)
- 覆蓋顯示
- 錯誤訊息：ERRMSG (70A, 輸出)
- 一般訊息：DMSG (78A, 輸出)
- 功能鍵說明：
  - PF3 = 返回前頁

### SFLSR/SFLCR - 子檔案
- 子檔案大小：120筆
- 每頁顯示：5筆
- 條件指示器：CA03(03), CF06(06), CF12(12)
- 保護模式
- 功能：
  - SFLDSP：顯示子檔案
  - SFLDSPCTL：顯示子檔案控制
  - SFLCLR：清除子檔案
  - SFLEND：結束子檔案
  - SFLDROP：刪除子檔案

### DSPD3 - 詳細資料畫面
- 游標位置控制
- 條件指示器：CA03(03), CF04(04), CF05(05), CF12(12)
- 覆蓋顯示
- 包含部門基本資料和相關設定欄位

### DSPC3 - 詳細資料控制畫面
- 錯誤訊息顯示
- 功能鍵說明：
  - PF3 = 返回前頁
  - PF12 = 返回前一頁

### SFLSRD/SFLCRD - 部門資料子檔案
- 子檔案大小：60筆
- 每頁顯示：10筆
- 覆蓋顯示
- 包含部門相關欄位

### SFLSRC/SFLCRC - 部門資料子檔案(複製用)
- 子檔案大小：60筆
- 每頁顯示：10筆
- 覆蓋顯示
- 包含部門相關欄位

## 欄位規格
| 欄位名稱 | 參考欄位 | 位置 | 格式 | 條件指示器 | 說明 |
|---------|---------|------|------|------------|------|
| CONAME | - | 1,1 | 32A | - | 公司名稱 |
| DDATE | - | 1,35 | 6Y | - | 系統日期 |
| $USERN | - | 1,70 | 10A | - | 使用者代號 |
| DAH01 | AH01 | 5,10 | 2A | - | 部門代號 |
| #B02 | - | 5,20 | 30A | - | 部門名稱 |
| DAH02 | AH02 | 5,60 | 1A | - | 部門類別 |
| ERRMSG | - | 22,5 | 70A | - | 錯誤訊息 |
| DMSG | - | 22,1 | 78A | - | 一般訊息 |

## 功能鍵說明
| 功能鍵 | 說明 |
|-------|------|
| PF3 | 返回前頁 |
| PF4 | 查詢 |
| PF5 | 新增 |
| PF6 | 修改 |
| PF7 | 刪除 |
| PF8 | 複製 |
| PF12 | 返回前一頁 |
| PF13 | 列印 |
| PF14 | 清除 |
| PF15 | 確認 |
| PF16 | 取消 |
| PF17 | 上頁 |
| PF18 | 下頁 |
| PF19 | 第一頁 |
| PF20 | 最後一頁 |
| PF21 | 查詢條件 |
| PF22 | 查詢結果 |
| PF23 | 查詢條件設定 |
| PF24 | 查詢結果設定 |

## 輸入欄位驗證
1. 部門代號 (DAH01)
   - 必填欄位
   - 長度：2位
   - 格式：英數字

2. 部門名稱 (#B02)
   - 必填欄位
   - 長度：30位
   - 格式：中英文

3. 部門類別 (DAH02)
   - 必填欄位
   - 長度：1位
   - 格式：英數字
   - 值域：需符合部門類別代碼表

## 錯誤處理
1. 錯誤訊息顯示位置：第22行
2. 錯誤訊息類型：
   - 必填欄位未填
   - 資料格式錯誤
   - 資料重複
   - 資料不存在
   - 系統錯誤

## 使用說明
1. 主畫面功能：
   - 可進行部門資料的查詢、新增、修改、刪除、複製等作業
   - 支援分頁顯示
   - 提供多種查詢條件設定

2. 詳細資料畫面：
   - 顯示部門完整資訊
   - 可進行資料維護
   - 提供資料驗證功能

3. 子檔案功能：
   - 顯示部門資料清單
   - 支援分頁瀏覽
   - 可進行資料選擇 