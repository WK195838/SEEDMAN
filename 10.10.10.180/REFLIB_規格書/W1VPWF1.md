# VIP基本資料備份檔規格書（W1VPWF1）

## 一、基本資訊
- **檔案名稱**：W1VPWF1
- **檔案說明**：VIP基本資料備份檔
- **檔案類型**：實體檔案（Physical File）
- **關鍵欄位**：W102 + W1021 + W101 + W108 + W105 + W103 + W109 + W110 + W111 + W112 + W113
- **備註**：UNIQUE索引、多重索引檔

## 二、記錄格式（W10）

### 1. 欄位定義
| 欄位名稱 | 長度 | 屬性 | 說明 | 檢核規則 |
|----------|------|------|------|----------|
| W101     | 5    | 字元 | 專櫃編號 | 必填，索引的一部分 |
| W102     | 15   | 字元 | 會員編號 | 必填，索引的一部分 |
| W1021    | 5    | 字元 | 分店編號 | 必填，索引的一部分 |
| W103     | 42   | 物件 | 姓名 | 必填，索引的一部分 |
| W1041    | 2    | 數值(0) | 出生月份 | 必填，無小數位 |
| W1042    | 2    | 數值(0) | 出生日期 | 必填，無小數位 |
| W105     | 1    | 字元 | 性別 | 必填，索引的一部分，有效值：M-男、F-女、''-其他 |
| W106     | 62   | 物件 | 聯絡地址 | 選填 |
| W107     | 42   | 物件 | 行動電話或市話 | 選填 |
| W108     | 30   | 字元 | E-MAIL ADDRESS | 選填，索引的一部分 |
| W109     | 1    | 字元 | 同意個資使用 | 必填，索引的一部分，有效值：Y-同意、N-不同意 |
| W110     | 1    | 字元 | 生日禮盒 | 索引的一部分，有效值：V-需要、''-不需要 |
| W111     | 1    | 字元 | DM寄送 | 索引的一部分，有效值：V-需要、''-不需要 |
| W112     | 1    | 字元 | EMAIL寄送 | 索引的一部分，有效值：V-需要、''-不需要 |
| W113     | 1    | 字元 | 電話通知 | 索引的一部分，有效值：V-需要、''-不需要 |
| W114     | 1    | 字元 | 會員等級 | 必填，有效值：A-一般、B-高級 |

### 2. 索引定義
- **複合索引**：W102 + W1021 + W101 + W108 + W105 + W103 + W109 + W110 + W111 + W112 + W113

## 三、關聯與檢核規則

### 1. 索引檢核
- 多個欄位組成複合索引，用於快速檢索與資料還原
- 不允許重複的索引值組合

### 2. 資料完整性檢核
- W101（專櫃編號）：必須是系統中已登記的有效專櫃編號
- W102（會員編號）：必須符合系統定義的會員編號格式
- W1021（分店編號）：必須是系統中有效的分店編號
- W103（姓名）：不可為空
- W1041（出生月份）：必須是1-12之間的有效數值
- W1042（出生日期）：必須是1-31之間的有效數值，並與月份相符
- W105（性別）：必須是有效的性別代碼（M-男、F-女、''-其他）
- W109（同意個資使用）：必須是有效的代碼（Y-同意、N-不同意）
- W114（會員等級）：必須是有效的等級代碼（A-一般、B-高級）

### 3. 業務規則
- 此備份檔用於儲存VIP基本資料檔（W1VPPF）的歷史版本
- 欄位結構與W1VPPF和W1VPWF相似，但前綴改為W1
- 系統會在會員資料變更前，將原始資料備份至此檔案
- 可用於資料復原、變更追蹤及稽核目的
- 個資使用同意（W109）的歷史記錄對於法規遵循有重要意義

## 四、使用說明

### 1. 檔案用途
- 作為VIP會員資料的歷史備份檔
- 提供資料變更的追蹤紀錄
- 支援會員資料的版本管理與復原
- 協助個資保護的法規遵循與稽核

### 2. 操作注意事項
- 備份檔通常為系統自動維護，一般操作時不需直接修改
- 資料還原時，應先確認資料的完整性與正確性
- 多重索引可用於資料的快速定位與檢索
- 此檔案可能隨時間增長變大，應定期進行資料清理或歸檔
- 包含個資，應遵循資料保護原則，控制存取權限

本規格書依據W1VPWF1.txt製作，完整記錄W1VPWF1檔案結構、欄位屬性與檢核規則。如需調整或有其他需求，歡迎隨時告知！ 