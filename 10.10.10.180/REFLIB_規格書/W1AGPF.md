# 前置倉儲庫存檔規格書（W1AGPF）

## 一、基本資訊
- **檔案名稱**：W1AGPF
- **檔案說明**：前置倉儲庫存檔
- **檔案類型**：實體檔案（Physical File）
- **關鍵欄位**：AG01 + AG02
- **備註**：UNIQUE索引

## 二、記錄格式（AG0）

### 1. 欄位定義
| 欄位名稱 | 長度 | 屬性 | 說明 | 檢核規則 |
|----------|------|------|------|----------|
| AG01     | 12   | 字元 | 倉儲名稱 | 必填，主鍵的一部分 |
| AG02     | 9    | 字元 | 商品編號 | 必填，主鍵的一部分 |
| AG03     | 8    | 數值(0) | 數量 | 必填，無小數位 |
| AG04     | 8    | 數值(0) | 確認數量 | 必填，無小數位 |
| AG05     | 1    | 字元 | 狀態 | 必填 |
| AG06     | 64   | 物件 | 程序 | 系統使用 |
| AGXX     | 8    | 數值(0) | 更新日期 | 系統自動產生，無小數位 |
| AGYY     | 6    | 數值(0) | 更新時間 | 系統自動產生，無小數位 |
| AGZZ     | 10   | 字元 | 更新人員 | 系統自動產生 |

### 2. 索引定義
- **主索引**：AG01 + AG02（唯一索引）

## 三、關聯與檢核規則

### 1. 主鍵檢核
- AG01（倉儲名稱）+ AG02（商品編號）組成唯一主鍵
- 不允許重複的主鍵值

### 2. 資料完整性檢核
- AG01（倉儲名稱）：必須是W1AFPF檔案中存在的有效倉儲名稱
- AG02（商品編號）：必須是系統中已登記的有效商品編號
- AG03（數量）：必須是有效的數值，無小數位
- AG04（確認數量）：必須是有效的數值，無小數位
- AG05（狀態）：必須是有效的狀態碼（如：A=正常，H=凍結等）
- AGXX（更新日期）：系統自動填入當前日期
- AGYY（更新時間）：系統自動填入當前時間
- AGZZ（更新人員）：系統自動填入操作員ID

### 3. 業務規則
- 每個倉儲名稱和商品編號的組合只能有一筆記錄
- 狀態碼（AG05）控制該庫存項目是否可用於系統操作
- 確認數量（AG04）用於庫存盤點確認，通常在盤點過程中更新
- 數量（AG03）與確認數量（AG04）的差異可用於評估庫存準確性
- 系統會自動記錄更新相關資訊（AGXX、AGYY、AGZZ）

## 四、使用說明

### 1. 檔案用途
- 儲存前置倉儲的商品庫存資料
- 管理各倉儲中不同商品的庫存數量
- 提供庫存盤點確認功能
- 控制庫存項目的使用狀態

### 2. 操作注意事項
- 新增記錄時，必須確保AG01、AG02組合的唯一性
- 系統會自動維護AGXX（更新日期）、AGYY（更新時間）和AGZZ（更新人員）欄位
- 修改記錄時，應注意保留原有的主鍵值，避免造成資料關聯性問題
- AG06（程序）欄位為系統內部使用，一般操作時不需手動維護
- 庫存數量變更時應同時更新AG03欄位，盤點確認時更新AG04欄位

本規格書依據W1AGPF.txt製作，完整記錄W1AGPF檔案結構、欄位屬性與檢核規則。如需調整或有其他需求，歡迎隨時告知！ 