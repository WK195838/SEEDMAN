# GLWF01.txt 檔案規格書

## 檔案概述
GLWF01.txt 是一個定義傳票臨時存檔(GLWF01)的資料結構檔案，屬於總帳模組(GL模組)系統的一部分。該檔案主要用於暫存處理中的會計傳票資料，是會計系統中處理傳票時的重要工作檔案。

## 檔案結構
檔案採用DDS (Data Description Specifications) 格式定義，以REF(GLRF)語句參照GLRF函式庫中的定義。其主要記錄格式為GLWF01R，包含多個與會計傳票相關的欄位，並定義了三個組合鍵值(Composite Key)欄位：WF0101、WF0102和WF0103。

### 關鍵特性
- 檔案名稱：GLWF01
- 記錄格式：GLWF01R
- 主鍵組合：WF0101(公司代碼) + WF0102(會計年度) + WF0103(傳票編號)
- 參照檔案：GLRF (總帳模組的參照檔案)

## 欄位結構說明

GLWF01.txt 定義了一個記錄格式(GLWF01R)，其中包含以下欄位：

| 欄位名稱 | 參照欄位 | 標題說明 | 用途說明 |
|----------|----------|----------|----------|
| WF0101   | AH01     | 公司代碼 | 識別傳票所屬公司 |
| WF0102   | AH02     | 會計年度 | 識別傳票所屬會計年度 |
| WF0103   | AH03     | 傳票編號 | 傳票的唯一識別編號 |
| WF0104   | AH04     | 會計科目 | 傳票使用的會計科目代碼 |
| WF0110   | AH10     | 過帳日期 | 傳票過帳的日期 |
| WF0112   | AH12     | 借方金額 | 傳票的借方金額 |
| WF0113   | AH13     | 貸方金額 | 傳票的貸方金額 |
| WF0116   | AH16     | 摘要     | 傳票的說明摘要 |
| WF0125   | AH25     | 建立日期 | 傳票的建立日期 |

### 欄位參照關係
所有欄位都通過REFFLD關鍵字參照GLAHPF(會計傳票檔)中的相對應欄位，這確保了資料格式的一致性。例如：

```
A            WF0101    R               COLHDG('公司代碼')
A                                      REFFLD(AH01)
```

這表示WF0101欄位的格式和屬性與GLRF中定義的AH01欄位相同。

### 主鍵結構
檔案定義了三個組合鍵值，用於唯一識別一筆傳票記錄：
```
A          K WF0101
A          K WF0102
A          K WF0103
```

這三個欄位的組合形成複合主鍵，分別代表公司代碼、會計年度和傳票編號。

## 檔案用途

GLWF01檔案在會計系統中的主要用途包括：

1. **傳票臨時存儲**：在會計傳票處理過程中，提供臨時存儲空間
2. **傳票資料驗證**：在正式寫入會計傳票主檔(GLAHPF)前，用於驗證傳票資料的正確性
3. **批次處理緩衝**：在批次處理傳票時，作為資料的緩衝區
4. **傳票編輯工作區**：提供用戶編輯傳票時的工作區域

## 與其他檔案的關聯

GLWF01與總帳模組中的其他檔案有以下關聯：

1. **參照關係**：
   - 直接參照GLRF檔案庫，繼承其資料定義
   - 欄位格式參照會計傳票檔(GLAHPF)的欄位定義

2. **資料流向**：
   - 資料通常從使用者輸入 → GLWF01(臨時存檔) → GLAHPF(會計傳票檔)
   - 處理完成後，臨時資料可能被清除或封存

## 系統中的角色

在總帳模組系統中，GLWF01作為臨時工作檔案，扮演以下角色：

1. **資料暫存區**：提供系統處理過程中的臨時存儲
2. **工作交換區**：作為不同處理程序間的資料交換媒介
3. **編輯緩衝區**：用戶編輯傳票時的工作區域

## 操作考量

使用GLWF01檔案時的主要操作考量：

1. **資料生命週期**：
   - 資料通常為臨時性質，完成處理後可能被清除
   - 系統可能定期清理長時間未處理的臨時資料

2. **同步問題**：
   - 多用戶環境下需注意資料的同步和鎖定問題
   - 應避免長時間鎖定影響其他用戶操作

3. **資料一致性**：
   - 需確保與GLAHPF檔案的資料格式一致性
   - 參照欄位的變更需同步更新

## 結論

GLWF01.txt是總帳系統中重要的傳票臨時存檔定義，通過REF參照GLRF庫確保與系統其他部分的資料一致性。它為傳票處理提供了必要的臨時工作區域，是會計系統中傳票處理流程的重要組成部分。理解和正確使用這個檔案對於維護系統的穩定運行和資料的一致性非常重要。 