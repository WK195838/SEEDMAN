# NPNDLF 檔案規格書

## 基本資訊
- 檔案名稱: NPNDLF
- 檔案類型: 邏輯檔案 (LF)
- 來源目錄: QDDSSRC_GLFLIB
- 檔案說明: 年度A&P預算與實支檔案的邏輯視圖

## 紀錄格式
- 紀錄格式名稱: ND0
- 實體檔案: NPNDPF (年度A&P預算與實支檔案)
- 存取路徑: REFACCPTH(NPNDPF)

## 欄位規格
| 欄位名稱 | 參考欄位 | 資料型態 | 欄位說明 | 備註 |
|---------|---------|---------|---------|------|
| ND01 | AA01 | 字元 | 部門別 | 識別部門的代碼 |
| ND02 | AC02 | 數值 | 年度 | 會計年度代碼 |
| ND03 | - | 字元 | 支出類別 | 支出分類的代碼 |
| ND04 | - | 字元 | 年度代號 | 特定年度的識別代碼 |
| ND05 | - | 字元 | A&P CODE | A&P費用代碼 |
| ND051 | - | 字元 | A&P CODE第一碼 | A&P費用代碼的首字 |
| ND06B | AH12 | 數值 | 一月預算 | 一月份的預算金額 |
| ND06A | AH12 | 數值 | 一月實支 | 一月份的實際支出金額 |
| ND07B | AH12 | 數值 | 二月預算 | 二月份的預算金額 |
| ND07A | AH12 | 數值 | 二月實支 | 二月份的實際支出金額 |
| ND08B | AH12 | 數值 | 三月預算 | 三月份的預算金額 |
| ND08A | AH12 | 數值 | 三月實支 | 三月份的實際支出金額 |
| ND09B | AH12 | 數值 | 四月預算 | 四月份的預算金額 |
| ND09A | AH12 | 數值 | 四月實支 | 四月份的實際支出金額 |
| ND10B | AH12 | 數值 | 五月預算 | 五月份的預算金額 |
| ND10A | AH12 | 數值 | 五月實支 | 五月份的實際支出金額 |
| ND11B | AH12 | 數值 | 六月預算 | 六月份的預算金額 |
| ND11A | AH12 | 數值 | 六月實支 | 六月份的實際支出金額 |
| ND12B | AH12 | 數值 | 七月預算 | 七月份的預算金額 |
| ND12A | AH12 | 數值 | 七月實支 | 七月份的實際支出金額 |
| ND13B | AH12 | 數值 | 八月預算 | 八月份的預算金額 |
| ND13A | AH12 | 數值 | 八月實支 | 八月份的實際支出金額 |
| ND14B | AH12 | 數值 | 九月預算 | 九月份的預算金額 |
| ND14A | AH12 | 數值 | 九月實支 | 九月份的實際支出金額 |
| ND15B | AH12 | 數值 | 十月預算 | 十月份的預算金額 |
| ND15A | AH12 | 數值 | 十月實支 | 十月份的實際支出金額 |
| ND16B | AH12 | 數值 | 十一月預算 | 十一月份的預算金額 |
| ND16A | AH12 | 數值 | 十一月實支 | 十一月份的實際支出金額 |
| ND17B | AH12 | 數值 | 十二月預算 | 十二月份的預算金額 |
| ND17A | AH12 | 數值 | 十二月實支 | 十二月份的實際支出金額 |
| ND18B | AH12 | 數值 | 全年預算 | 全年預算金額 |
| ND18A | AH12 | 數值 | 全年實支 | 全年實際支出金額 |
| ND19 | - | 字元 | 卡別代碼 | 卡別識別代碼 |
| ND20 | - | 字元 | 卡別序號 | 卡別序號識別 |
| ND97 | AA97 | 時間戳記 | 建立時間 | 記錄建立的時間 |
| ND98 | AA98 | 日期 | 建立日期 | 記錄建立的日期 |
| ND99 | AA99 | 字元 | 建立者 | 記錄建立者的識別碼 |

## 索引資訊
原始檔案NPNDPF的索引鍵包含以下欄位:
1. ND01 (部門別)
2. ND02 (年度)
3. ND03 (支出類別)
4. ND04 (年度代號)
5. ND05 (A&P CODE)
6. ND19 (卡別代碼)
7. ND20 (卡別序號)

## 特殊欄位說明
1. ND01 (部門別): 
   - 識別部門的代碼，用於區分不同部門的預算和支出記錄
   - 參照GLRF中的AA01欄位定義

2. ND02 (年度):
   - 會計年度代碼，識別預算和支出所屬的年度
   - 參照GLRF中的AC02欄位定義

3. ND03 (支出類別):
   - 支出分類的代碼，用於區分不同類型的支出
   - 支出類別代碼說明:
     - 10: 固定資產
     - 20: 員工福利
     - 30: 銷售費

4. ND04 (年度代號):
   - 特定年度的識別代碼
   - 年度代號99表示跨年度支出

5. ND05 (A&P CODE):
   - A&P費用代碼，進一步細分支出用途

6. ND06B-ND17B (月份預算):
   - 各月份的預算金額
   - 參照GLRF中的AH12欄位定義

7. ND06A-ND17A (月份實支):
   - 各月份的實際支出金額
   - 參照GLRF中的AH12欄位定義

8. ND18B (全年預算):
   - 全年度的總預算金額
   - 參照GLRF中的AH12欄位定義

9. ND18A (全年實支):
   - 全年度的總實際支出金額
   - 參照GLRF中的AH12欄位定義

10. ND19 (卡別代碼):
    - 卡別識別代碼，可能用於區分不同的費用卡類型
    - 為後續M001版修改所增加的欄位

11. ND20 (卡別序號):
    - 卡別序號識別，與卡別代碼配合使用
    - 為後續M001版修改所增加的欄位

## 檢核規則
1. 主索引鍵規則:
   - ND01 + ND02 + ND03 + ND04 + ND05 + ND19 + ND20 組合必須唯一
   - 不允許重複的支出預算與實支記錄

2. 欄位檢核:
   - ND03 (支出類別) 必須是有效的支出類別代碼 (10, 20, 30, 99)
   - 預算金額與實支金額應為有效的數值
   - 年度代碼必須有效

## 相關檔案
- NPNDPF: 實體檔案，提供NPNDLF的資料來源
- NPRF: 參考欄位定義檔，提供欄位的詳細資料型態和長度
- GLRF: 提供參考欄位(AA01, AC02, AH12等)的定義
- NPNCPF: 支出年度代碼檔案，提供支出類別和年度的定義

## 備註
- 本檔案規格書根據QDDSSRC_GLFLIB/NPNDLF.txt和NPNDPF.txt檔案內容產生
- NPNDLF是NPNDPF(年度A&P預算與實支檔案)的邏輯視圖，提供額外的存取路徑
- 邏輯檔案繼承實體檔案的所有欄位，但可以提供不同的索引或篩選條件
- 此檔案主要用於A&P(Accounts Payable)相關的預算控制和費用管理
- 檔案結構顯示每個月份都有預算和實際支出兩欄，方便進行月度預算控制和差異分析
- M001版(2003年7月1日)新增了ND19和ND20欄位，用於卡別識別 