# GLWF03.txt 檔案規格書

## 檔案概述
GLWF03.txt 是一個定義科目分類工作檔(GLWF03)的資料結構檔案，屬於總帳模組(GL模組)系統的一部分。該檔案主要用於處理會計科目的分類與金額計算，提供報表產生時所需的科目分類與匯總功能。

## 檔案結構
檔案採用DDS (Data Description Specifications) 格式定義，以REF(GLRF)語句參照GLRF函式庫中的定義。其主要記錄格式為GLWF03R，包含多個與科目分類和金額相關的欄位，以WF0301(科目代號)作為主鍵。

### 關鍵特性
- 檔案名稱：GLWF03
- 記錄格式：GLWF03R
- 主鍵：WF0301(科目代號)
- 參照檔案：GLRF (總帳模組的參照檔案)

## 欄位結構說明

GLWF03.txt 定義了一個記錄格式(GLWF03R)，其中包含以下欄位：

| 欄位名稱 | 參照欄位 | 標題說明 | 用途說明 |
|----------|----------|----------|----------|
| WF0301   | AS04     | 科目代號 | 會計科目的唯一識別代號 |
| WF0302   | AS08     | 過帳標記 | 標記科目是否過帳，'V'表示過帳，空白表示非過帳 |
| WF0303   | AS10     | 科目名稱 | 會計科目的名稱 |
| WF0304   | AH12     | 金額一   | 第一個金額欄位，通常用於特定期間的金額 |
| WF0305   | AH12     | 金額二   | 第二個金額欄位，通常用於特定期間的金額 |
| WF0306   | AH12     | 金額三   | 第三個金額欄位，通常用於特定期間的金額 |
| WF0307   | AH12     | 金額四   | 第四個金額欄位，通常用於特定期間的金額 |
| WF0308   | AH12     | 金額五   | 第五個金額欄位，通常用於特定期間的金額 |
| WF0309   | AH12     | 金額六   | 第六個金額欄位，通常用於特定期間的金額 |

### 欄位參照關係
欄位參照了兩個核心檔案的定義：
1. **報表格式設定明細檔(GLASPF)**：科目代號(AS04)、過帳標記(AS08)、科目名稱(AS10)
2. **會計傳票檔(GLAHPF)**：金額欄位(AH12)

這種參照關係表明GLWF03與報表格式設定和會計傳票有緊密關聯。

### 主鍵結構
檔案使用WF0301(科目代號)作為主鍵：
```
A          K WF0301
```

這個設計表明科目代號是識別科目分類記錄的唯一欄位。

## 欄位細節分析

### 基本識別欄位
- **WF0301(科目代號)**：識別會計科目的主要欄位，參照AS04
- **WF0303(科目名稱)**：描述科目的名稱，參照AS10，用於報表顯示

### 控制欄位
- **WF0302(過帳標記)**：
  - 參照AS08
  - 標記科目是否參與過帳
  - 值域：'V'表示過帳科目，空白表示非過帳科目

### 金額欄位
- **WF0304-WF0309(金額一至金額六)**：
  - 均參照AH12(借方金額)的資料格式
  - 可能用於記錄不同期間或不同性質的金額
  - 此設計允許在一筆科目記錄中存儲多個金額值，有利於比較分析

## 檔案用途

GLWF03檔案在會計系統中的主要用途包括：

1. **科目分類匯總**：提供科目分類與金額匯總的處理工作區
2. **報表準備處理**：為會計報表產生前準備科目分類與金額計算
3. **多期間比較**：支援多個期間金額的比較分析
4. **科目資料暫存**：作為科目資料處理的臨時存儲空間
5. **科目餘額計算**：用於計算科目的期末餘額

## 與其他檔案的關聯

GLWF03與總帳模組中的其他檔案有以下關聯：

1. **直接參照關係**：
   - 參照GLRF檔案庫的定義
   - 科目相關欄位參照報表格式設定明細檔(GLASPF)
   - 金額欄位參照會計傳票檔(GLAHPF)

2. **功能關聯**：
   - 與報表格式設定(GLARPF/GLASPF)關聯，可能作為報表產生的中間檔
   - 與科目基準表(GLADPF)有關聯，使用相同的科目體系
   - 可能接收GLWF01/GLWF02的處理結果，用於進一步匯總

3. **資料流向**：
   - 科目基本資料 → 傳票明細資料 → GLWF03(科目分類工作檔) → 報表產生

## 系統中的角色

在總帳模組系統中，GLWF03作為科目分類工作檔，扮演以下角色：

1. **科目分類處理中心**：處理科目分類與金額匯總
2. **多期間比較工具**：通過多個金額欄位支援多期間資料比較
3. **報表生成的中間層**：作為原始會計資料與最終報表之間的處理中間層
4. **科目匯總的工作區**：提供科目層級的資料匯總工作空間

## 特殊設計考量

從GLWF03的設計可以觀察到以下特殊考量：

1. **多金額欄位設計**：
   - 提供6個金額欄位(WF0304-WF0309)
   - 這種設計有助於進行多期間或多類型的金額比較
   - 例如，可以同時存儲本期金額、去年同期金額、預算金額等

2. **簡單主鍵設計**：
   - 僅使用科目代號作為主鍵，不像GLWF02那樣使用複雜的複合主鍵
   - 這表明每個科目在此檔案中只有一筆記錄

3. **過帳標記控制**：
   - WF0302欄位用於控制科目是否參與過帳
   - 這提供了靈活選擇哪些科目參與計算的能力

## 操作考量

使用GLWF03檔案時的主要操作考量：

1. **資料整合與一致性**：
   - 需確保WF0301(科目代號)與科目基準表中的科目代號保持一致
   - 金額計算時需注意借貸方向的正確處理

2. **多金額欄位的使用策略**：
   - 應明確定義每個金額欄位的用途
   - 可能需要建立欄位用途的文檔或命名規範

3. **報表產生流程**：
   - 在報表產生流程中明確GLWF03的處理時機
   - 定義清晰的科目分類與匯總規則

## 結論

GLWF03.txt是總帳系統中重要的科目分類工作檔定義，它為會計報表的產生提供了必要的科目分類和金額計算功能。通過其多金額欄位設計，能夠支援複雜的多期間比較和分析需求。這個檔案在會計報表產生流程中扮演關鍵的中間層角色，連接原始會計資料和最終的財務報表。準確理解和使用這個檔案對於確保會計報表的正確性和一致性至關重要。 