# WFPC01PF 檔案規格書

## 基本資訊
- 檔案名稱: WFPC01PF
- 檔案類型: 物理檔案 (PF)
- 來源目錄: QDDSSRC_GLFLIB
- 檔案說明: 付款暫存檔案
- 唯一性: UNIQUE (不允許重複記錄)

## 紀錄格式
- 紀錄格式名稱: WFPC01R
- 參考檔案: PCCAPF (引用集合資料檔的欄位定義)
- 主鍵組合: PC0102 + PC0103 + PC0101 + PC0105 + PC0109 + PC0110 + PC0111 + PC0112 + PC0113 + PC0106 + PC0108

## 欄位規格
| 欄位名稱 | 參考欄位 | 資料型態 | 欄位長度 | 欄位說明 | 備註 |
|---------|---------|---------|---------|---------|------|
| PC0102 | CA01 | 字元 | - | 公司別 | RE/WL/CN等公司代碼 |
| PC0103 | - | 字元 | 1 | 資料狀態 | '1'-保留, '2'-保管, '3'-付款 |
| PC0101 | - | 數值 | 6,0 | 作業單號 | - |
| PC0105 | CA04 | 字元 | - | 年月 | 參考PCCAPF.CA04 |
| PC0106 | CA02 | 字元 | - | 編號 | 參考PCCAPF.CA02 |
| PC0108 | CA03 | 字元 | - | 日期 | 參考PCCAPF.CA03 |
| PC0107 | - | 數值 | 11,2 | 金額 | 小數點2位 |
| PC0109 | GLRF.AH05 | 字元 | - | 會計科目 | 參考GLRF.AH05 |
| PC0110 | GLRF.AH06 | 字元 | - | 單位別 | 參考GLRF.AH06 |
| PC0111 | GLRF.AH07 | 字元 | - | 專案代碼一 | 參考GLRF.AH07 |
| PC0112 | GLRF.AH08 | 字元 | - | 專案代碼二 | 參考GLRF.AH08 |
| PC0113 | GLRF.AH09 | 字元 | - | 幣別 | 參考GLRF.AH09 |
| PC0114 | - | 字元 | 1 | 列印標誌 | '*'表示上次已列印 |

## 主鍵資訊
檔案採用以下欄位作為複合主鍵（依順序）：
1. PC0102 (公司別)
2. PC0103 (資料狀態)
3. PC0101 (作業單號)
4. PC0105 (年月)
5. PC0109 (會計科目)
6. PC0110 (單位別)
7. PC0111 (專案代碼一)
8. PC0112 (專案代碼二)
9. PC0113 (幣別)
10. PC0106 (編號)
11. PC0108 (日期)

## 特殊欄位說明
### 1. 資料狀態 (PC0103)
資料狀態欄位用於標識付款處理的當前狀態：
- '1': 保留狀態 - 資料已輸入但尚未確認
- '2': 保管狀態 - 資料已確認但尚未進行付款
- '3': 付款狀態 - 資料已進行付款處理

### 2. 會計科目及明細欄位 (PC0109-PC0113)
此檔案透過引用GLRF檔案中的會計科目相關欄位，支援完整的會計分錄需求：
- 會計科目 (PC0109): 交易的會計科目代碼
- 單位別 (PC0110): 對應的部門或成本中心
- 專案代碼 (PC0111, PC0112): 用於專案核算的專案識別碼
- 幣別 (PC0113): 交易貨幣類型

### 3. 列印標誌 (PC0114)
列印標誌欄位用於追蹤記錄的列印狀態：
- '*': 表示該筆資料已在上次批次處理中列印過
- 其他值: 表示尚未列印

## 檔案用途與功能
WFPC01PF作為付款暫存檔案，主要用途包括：
1. 暫存付款交易資料，等待批次處理
2. 追蹤付款處理各階段的狀態（保留、保管、付款）
3. 提供會計分錄處理所需的完整資訊
4. 支援付款列印功能，並記錄列印狀態
5. 作為付款流程中的中間資料暫存檔案

## 與其他檔案的關係
WFPC01PF在系統中具有以下關係：
1. 與PCCAPF (集合資料檔) 的關聯：引用其基本欄位定義
2. 與GLRF (總帳參考欄位檔) 的關聯：引用會計科目相關欄位
3. 與付款流程相關檔案的關聯：作為暫存處理檔案
4. 與列印系統的關聯：提供列印資料及狀態追蹤

## 業務流程
此檔案在付款業務流程中的應用包括：
1. 資料收集：從原始來源收集付款資料後暫存
2. 狀態管理：跟踪付款進度，從保留到付款的全過程
3. 批次處理：支援批次處理付款資料
4. 付款列印：支援付款單據列印功能
5. 資料轉移：完成處理後資料轉移至正式檔案

## 維護管理
付款暫存檔案的維護管理重點：
1. 資料清理：定期清理已完成處理的資料
2. 狀態監控：監控各狀態資料的數量與停留時間
3. 錯誤處理：提供機制處理錯誤資料
4. 批次效率：優化批次處理的效能與穩定性

## 備註
- 此檔案採用UNIQUE屬性，確保每筆交易記錄的唯一性
- 檔案設計支援多公司別、多幣別的付款處理需求
- 欄位結構設計遵循會計科目編碼體系
- 資料狀態設計支援付款處理的工作流程控制
- 檔案在交易過程中扮演臨時存儲的角色，非永久性資料儲存 