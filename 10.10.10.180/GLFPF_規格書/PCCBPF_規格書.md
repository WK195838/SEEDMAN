# PCCBPF 檔案規格書

## 基本資訊
- 檔案名稱: PCCBPF
- 檔案類型: 物理檔案 (PF)
- 來源目錄: QDDSSRC_GLFLIB
- 檔案說明: 催收資料計數器檔案
- 唯一性: UNIQUE (不允許重複記錄)

## 紀錄格式
- 紀錄格式名稱: CB0
- 參考檔案: GLRF (基礎參考欄位定義檔)

## 欄位規格
| 欄位名稱 | 參考欄位 | 資料型態 | 欄位長度 | 欄位說明 | 備註 |
|---------|---------|---------|---------|---------|------|
| CB01 | AH01 | 字元 | - | 部門別 | 識別部門的代碼 |
| CB02 | - | 字元 | 1 | 處理步 | 催收處理階段代碼 |
| CB03 | - | 數值 | 4.0 | 年度 | 西元年度 |
| CB04 | - | 數值 | 3.0 | 流水號 | 自動遞增的流水編號 |
| CB97 | AH97 | - | - | 建立時間 | 記錄建立時間 |
| CB98 | AH98 | - | - | 建立日期 | 記錄建立日期 |
| CB99 | AH99 | - | - | 建立者 | 記錄建立者識別碼 |

## 主鍵資訊
檔案採用以下欄位作為主鍵：
1. CB01 (部門別)
2. CB02 (處理步)
3. CB03 (年度)

## 檔案用途與功能
PCCBPF作為催收資料計數器檔案，主要用途包括：
1. 為PCCAPF檔案中的催收資料編號(CA02)提供流水號
2. 根據部門、處理步驟和年度組合，管理各種催收資料的編號序列
3. 維護催收資料編號的唯一性和順序性
4. 支援催收資料的自動編號機制

## 與PCCAPF的關係
PCCBPF與PCCAPF有密切的功能關係：
1. PCCAPF中的催收資料編號(CA02)格式為：C-X-XXXX-XXX
   - 其中X代表處理步(對應PCCBPF的CB02)
   - XXXX代表西元年份(對應PCCBPF的CB03)
   - XXX代表流水號(對應PCCBPF的CB04)

2. 當系統新增催收資料時，會按照下列步驟操作：
   - 根據部門別、處理步和年度在PCCBPF中查詢對應記錄
   - 取得當前流水號值(CB04)並加1
   - 更新PCCBPF中的流水號值
   - 使用更新後的值生成催收資料編號，供PCCAPF使用

## 流水號管理機制
- CB04欄位為3位數值，理論上每個部門、處理步和年度組合最多可支援999筆催收資料
- 每年度流水號會重新開始計數，避免編號過長
- 部門和處理步的區分，使不同業務類型和部門的催收資料可獨立編號

## 相關檔案
- PCCAPF: 催收資料主檔，使用PCCBPF產生的流水號作為其編號的一部分
- PCCALF01: 提供最新催收資料優先的邏輯檢視
- PCCALF02: 提供按催收資料編號自然順序的邏輯檢視

## 備註
- 此檔案作為系統編號控制的基礎結構，保證催收資料編號的唯一性和一致性
- 採用部門、處理步、年度作為複合主鍵，可支援多部門、多流程的催收作業
- 同時記錄建立時間、日期和建立者，便於追蹤計數器的變更歷史
- 流水號設計為3位數(001-999)，適合一般業務量的催收管理
- UNIQUE屬性確保每個部門、處理步、年度組合只有一個計數器記錄 