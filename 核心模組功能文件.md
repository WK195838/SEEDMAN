# 總帳系統核心模組功能文件

## 1. 功能概述

### 1.1 功能目的
核心模組(PCA系列)是總帳系統的基礎，負責處理會計科目的基本作業，包括科目維護、分錄處理、餘額計算等核心功能，確保會計資料的正確性和完整性。

### 1.2 功能範圍
- 會計科目維護
- 會計分錄處理
- 會計餘額計算
- 會計期間處理
- 會計資料驗證

### 1.3 功能特點
- 即時處理
- 資料驗證
- 交易追蹤
- 餘額計算
- 期間控制

## 2. 功能架構

### 2.1 會計科目維護 (PCA001)
- 功能描述：維護會計科目基本資料
- 主要特點：
  * 支援科目新增
  * 支援科目修改
  * 支援科目刪除
- 相關檔案：
  * GLAAPF：會計主檔
  * GLACPF：會計科目檔

### 2.2 會計分錄處理 (PCA002)
- 功能描述：處理會計分錄資料
- 主要特點：
  * 支援分錄新增
  * 支援分錄修改
  * 支援分錄刪除
- 相關檔案：
  * GLAFPF：會計分錄檔
  * GLADPF：會計明細檔

### 2.3 會計餘額計算 (PCA003)
- 功能描述：計算會計科目餘額
- 主要特點：
  * 支援期間餘額計算
  * 支援多幣別計算
  * 支援餘額調整
- 相關檔案：
  * GLAAPF：會計主檔
  * GLABPF：會計餘額檔

### 2.4 會計期間處理 (PCA004)
- 功能描述：處理會計期間作業
- 主要特點：
  * 支援期間開帳
  * 支援期間結帳
  * 支援期間調整
- 相關檔案：
  * GLAAPF：會計主檔
  * GLABPF：會計餘額檔

### 2.5 會計資料驗證 (PCA005)
- 功能描述：驗證會計資料正確性
- 主要特點：
  * 支援資料完整性檢查
  * 支援資料一致性檢查
  * 支援資料正確性檢查
- 相關檔案：
  * 所有系統檔案
  * 驗證記錄檔

## 3. 功能參數設定

### 3.1 基本參數
- 會計年度：年度設定
- 會計期間：期間設定
- 公司代號：公司設定
- 幣別設定：幣別設定
- 科目設定：科目設定

### 3.2 進階參數
- 分錄規則設定
- 餘額計算規則
- 期間處理規則
- 驗證規則設定
- 系統參數設定

## 4. 功能控制

### 4.1 處理控制
- 資料輸入控制
- 資料修改控制
- 資料刪除控制
- 資料查詢控制
- 資料輸出控制

### 4.2 輸出控制
- 螢幕顯示
- 報表輸出
- 資料匯出
- 訊息通知
- 日誌記錄

## 5. 錯誤處理

### 5.1 錯誤訊息
- E001：資料輸入錯誤
- E002：資料驗證錯誤
- E003：處理邏輯錯誤
- E004：系統錯誤

### 5.2 例外處理
- 輸入錯誤：提示修正
- 驗證錯誤：記錄並通知
- 處理錯誤：記錄並通知
- 系統錯誤：記錄並通知

## 6. 安全控制

### 6.1 權限控制
- 一般使用者：基本操作權限
- 進階使用者：進階操作權限
- 系統管理員：完整操作權限

### 6.2 資料安全
- 操作權限控制
- 資料存取控制
- 操作日誌記錄

## 7. 效能考量

### 7.1 效能指標
- 回應時間：< 1秒
- 處理量：< 10,000筆/日
- 記憶體使用：< 1GB

### 7.2 優化建議
- 適當的索引設計
- 優化處理邏輯
- 定期維護資料

## 8. 維護說明

### 8.1 日常維護
- 參數設定維護
- 資料維護
- 日誌維護

### 8.2 問題處理
- 資料問題：檢查資料正確性
- 系統問題：檢查系統狀態
- 效能問題：檢查系統資源

## 9. 版本歷史

### 9.1 版本記錄
| 版本 | 日期 | 修改內容 | 修改人 |
|-----|------|----------|--------|
| 1.0 | 2024/03/20 | 初始版本 | 系統開發組 |
| 1.1 | 2024/03/21 | 新增資料驗證功能 | 系統開發組 |

### 9.2 修改記錄
- 2024/03/20：完成基本功能開發
- 2024/03/21：新增資料驗證功能

## 10. 螢幕布局說明

### 10.1 核心功能主選單 (GLA2M0D)
```
+------------------------------------------+
|  總帳系統 - 核心功能                     |
+------------------------------------------+
|  1. 會計科目維護                         |
|  2. 會計分錄處理                         |
|  3. 會計餘額計算                         |
|  4. 會計期間處理                         |
|  5. 會計資料驗證                         |
|  6. 參數設定                             |
|  7. 系統維護                             |
+------------------------------------------+
|  F3=結束  F4=提示  F12=取消              |
+------------------------------------------+
```

### 10.2 會計科目維護畫面 (GLA2A0D)
```
+------------------------------------------+
|  會計科目維護                            |
+------------------------------------------+
|  科目代號: [    ]                        |
|  科目名稱: [                    ]        |
|  科目類別: [    ]                        |
|  科目狀態: [    ]                        |
|  幣別    : [    ]                        |
|  科目性質: [    ]                        |
+------------------------------------------+
|  科目代號  科目名稱  類別  狀態  幣別    |
|  --------  --------  ----  ----  ----    |
|  XXXX      XXXX      XXXX  XXXX  XXXX    |
|  XXXX      XXXX      XXXX  XXXX  XXXX    |
|  XXXX      XXXX      XXXX  XXXX  XXXX    |
+------------------------------------------+
|  F3=結束  F4=新增  F12=取消              |
+------------------------------------------+
```

### 10.3 會計分錄處理畫面 (GLA2E0D)
```
+------------------------------------------+
|  會計分錄處理                            |
+------------------------------------------+
|  分錄日期: [    ]                        |
|  分錄號碼: [    ]                        |
|  摘要    : [                    ]        |
|  借方科目: [    ]                        |
|  貸方科目: [    ]                        |
|  金額    : [    ]                        |
+------------------------------------------+
|  分錄號碼  日期  摘要  借方  貸方  金額  |
|  --------  ----  ----  ----  ----  ----  |
|  XXXX      XXXX  XXXX  XXXX  XXXX  XXXX  |
|  XXXX      XXXX  XXXX  XXXX  XXXX  XXXX  |
|  XXXX      XXXX  XXXX  XXXX  XXXX  XXXX  |
+------------------------------------------+
|  F3=結束  F4=新增  F12=取消              |
+------------------------------------------+
```

### 10.4 會計餘額計算畫面 (GLA2B0D)
```
+------------------------------------------+
|  會計餘額計算                            |
+------------------------------------------+
|  計算期間: [    ] 年度 [  ] 月份         |
|  科目範圍: [    ] 至 [    ]              |
|  幣別    : [    ]                        |
|  計算方式: [    ]                        |
+------------------------------------------+
|  科目代號  科目名稱  期初  借方  貸方  期末|
|  --------  --------  ----  ----  ----  ----|
|  XXXX      XXXX      XXXX  XXXX  XXXX  XXXX|
|  XXXX      XXXX      XXXX  XXXX  XXXX  XXXX|
|  XXXX      XXXX      XXXX  XXXX  XXXX  XXXX|
+------------------------------------------+
|  F3=結束  F4=計算  F12=取消              |
+------------------------------------------+
```

### 10.5 會計期間處理畫面 (GLA2P0D)
```
+------------------------------------------+
|  會計期間處理                            |
+------------------------------------------+
|  處理年度: [    ]                        |
|  處理期間: [  ]                          |
|  處理類型: [    ]                        |
|  處理狀態: [    ]                        |
+------------------------------------------+
|  年度  期間  類型  狀態  處理日期  處理人  |
|  ----  ----  ----  ----  --------  ----  |
|  XXXX  XXXX  XXXX  XXXX  XXXX      XXXX  |
|  XXXX  XXXX  XXXX  XXXX  XXXX      XXXX  |
|  XXXX  XXXX  XXXX  XXXX  XXXX      XXXX  |
+------------------------------------------+
|  F3=結束  F4=處理  F12=取消              |
+------------------------------------------+
```

### 10.6 會計資料驗證畫面 (GLA2V0D)
```
+------------------------------------------+
|  會計資料驗證                            |
+------------------------------------------+
|  驗證年度: [    ]                        |
|  驗證期間: [  ]                          |
|  驗證類型: [    ]                        |
|  驗證範圍: [    ]                        |
+------------------------------------------+
|  驗證項目  狀態  錯誤訊息  處理方式      |
|  --------  ----  --------  ----          |
|  XXXX      XXXX  XXXX      XXXX          |
|  XXXX      XXXX  XXXX      XXXX          |
|  XXXX      XXXX  XXXX      XXXX          |
+------------------------------------------+
|  F3=結束  F4=驗證  F12=取消              |
+------------------------------------------+
``` 